import SEO from '../../components/SEO';

<SEO
  title="Combobox"
  description="Combobox component is a component that is used to get user input in a text field. It is usually used together with a FormControl to provide an accessible label, validation messages, etc."
/>

# Combobox

Combobox component is a component that is used to get user input in a text field. It is usually used together with a FormControl to provide an accessible label, validation messages, etc.

## Import

```js
import { Combobox } from 'sajari/react-components';
```

## Usage

```jsx
<Combobox />
```

### Suggestions mode

You can set `mode` to `suggestions` to render autocomplete suggstions.

```jsx
function Example() {
  const [query, setQuery] = React.useState('');
  const [value, setValue] = React.useState('');
  const suggestions = [
    'apple ipad',
    'apple ipod',
    'apple imac',
    'apple iphone',
    'apple mac mini',
    'apple mac pro',
    'apple macbook pro',
    'apple pro xdr',
    'apple tv',
    'apple watch',
  ];

  const handleSubmit = (event) => {
    event.preventDefault();
    const formData = new FormData(event.target);
    setQuery(formData.get('query'));
  };

  return (
    <>
      <Text>Current query: {query}</Text>
      <Text>Current value: {value}</Text>

      <form onSubmit={handleSubmit}>
        <Combobox
          mode="suggestions"
          label="Query"
          name="query"
          value={query}
          placeholder="Search"
          items={suggestions}
          onChange={setValue}
        />
      </form>
    </>
  );
}
```

### Custom item

```jsx
function Example() {
  const [query, setQuery] = React.useState('');
  const [value, setValue] = React.useState('');
  const items = [
    { title: 'apple iphone' },
    { title: 'apple imac' },
    { title: 'apple watch' },
    { title: 'apple mac pro' },
    { title: 'apple macbook pro' },
  ];

  const handleSubmit = (event) => {
    event.preventDefault();
    const formData = new FormData(event.target);
    setQuery(formData.get('query'));
  };

  return (
    <Combobox
      mode="suggestions"
      label="Query"
      name="query"
      value={query}
      placeholder="Search"
      items={items}
      onChange={setValue}
      itemToString={(item) => item.title}
      itemRender={() => <div>{item.title}</div>}
    />
  );
}
```

### Typeahead mode

You can set `mode` to `typeahead` to render a typeahead suggestion.

```jsx
<Combobox mode="typeahead" label="Query" name="query" placeholder="Search" completion="apple iphone" />
```

### Loading

```jsx
<Combobox loading />
```

## Speech recognition

```jsx
<Combobox enableVoice />
```

## Props

`Combobox` component props inherits the `input` element props with some additional for speech recognition and loading state

| Name                | Type                                                            | Default      | Description                                                                                                                                                                                                                                                                                               |
| ------------------- | --------------------------------------------------------------- | ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `mode`              | `'standard'` \| `'typeahead'` \| `'suggestions'` \| `'results'` | `'standard'` | The mode of the combobox. `'standard'` will operate as a normal text input. `'typeahead`' will provide an inline completion suggestion. `'suggestions'` will provide an autocomplete menu with options to select. `'results'` will perform a full search using the provided term and render full results. |
| `loading`           | `boolean`                                                       | `false`      | Show the spinner icon                                                                                                                                                                                                                                                                                     |
| `enableVoice`       | `boolean`                                                       | `false`      | Whether to enable speech recognition ([Compatibility table](https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition))                                                                                                                                                                          |
| `captureVoiceInput` | `boolean`                                                       | `true`       | Whether to set the combobox value to the voice input, if enabled.                                                                                                                                                                                                                                         |
| `onChange`          | `(value: string) => void`                                       |              | The callback when the input value changes. Note: The `event` is not passed as the argument.                                                                                                                                                                                                               |
| `onVoiceInput`      | `(value: string) => void`                                       |              | The callback when a voice transcript is output                                                                                                                                                                                                                                                            |
| `items`             | `string[]`                                                      |              | An array of strings to use for autocomplete suggestions.                                                                                                                                                                                                                                                  |
| `completion`        | `string`                                                        |              | A string to use for a typeahead value.                                                                                                                                                                                                                                                                    |
